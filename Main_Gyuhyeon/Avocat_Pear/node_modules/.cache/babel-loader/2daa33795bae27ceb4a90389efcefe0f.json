{"ast":null,"code":"import Axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\nexport const MainURL = \"http://10.156.147.50:8081\";\nexport const FileURL = \"http://3.15.177.120:3000\";\nexport function request(method, url, header, data) {\n  return Axios({\n    method,\n    url: MainURL + url,\n    headers: header,\n    data: data\n  }).then(res => {\n    console.log(\"다 받기 성공\");\n    console.log(res);\n    return res;\n  }).catch(e => {\n    console.log(MainURL + url);\n    console.error(e);\n  });\n}\nexport function fileRequest(method, url, header, data) {\n  return Axios({\n    method,\n    url: FileURL + url,\n    headers: header,\n    data: data\n  }).then(res => {\n    console.log(\"다 받기 성공\");\n    console.log(res);\n    return res;\n  }).catch(e => {\n    console.error(e);\n  });\n}\nexport function useRefresh(method, url, data) {\n  const history = useHistory();\n  return Axios({\n    method: \"put\",\n    url: MainURL + \"/auth\",\n    headers: {\n      \"X-Refresh-Token\":\n      /* \"eyJhbGciOiJIUzI1NiJ9.eyJpYXQiOjE2MTAzNjE1OTYsInN1YiI6IjIwMTIwMWtlYkBkc20uaHMua3IiLCJleHAiOjE2MTAzNjE3MTYsInR5cGUiOiJyZWZyZXNoX3Rva2VuIn0.8sq03qagvs3fV6zHYaa3XclEmRCnQ2vQd6LpryMjEUM\", */\n      localStorage.getItem(\"refresh-token\")\n    },\n    data: data\n  }).then(res => {\n    localStorage.setItem(\"access-token\", res.data.access_token);\n  }).catch(() => {\n    localStorage.removeItem(\"access-token\");\n    localStorage.removeItem(\"refresh-token\");\n    history.push(\"/\");\n  });\n}","map":{"version":3,"sources":["C:/Users/rbgus/OneDrive/바탕 화면/User_Frontend/CodeClone(pear)/Pear_CodeClone/Main_Gyuhyeon/Avocat_Pear/src/utils/axios/axios.js"],"names":["Axios","useHistory","MainURL","FileURL","request","method","url","header","data","headers","then","res","console","log","catch","e","error","fileRequest","useRefresh","history","localStorage","getItem","setItem","access_token","removeItem","push"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AAEA,OAAO,MAAMC,OAAO,GAAG,2BAAhB;AACP,OAAO,MAAMC,OAAO,GAAG,0BAAhB;AAEP,OAAO,SAASC,OAAT,CAAiBC,MAAjB,EAAyBC,GAAzB,EAA8BC,MAA9B,EAAsCC,IAAtC,EAA4C;AACjD,SAAOR,KAAK,CAAC;AACXK,IAAAA,MADW;AAEXC,IAAAA,GAAG,EAAEJ,OAAO,GAAGI,GAFJ;AAGXG,IAAAA,OAAO,EAAEF,MAHE;AAIXC,IAAAA,IAAI,EAAEA;AAJK,GAAD,CAAL,CAMJE,IANI,CAMEC,GAAD,IAAS;AACbC,IAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACA,WAAOA,GAAP;AACD,GAVI,EAWJG,KAXI,CAWGC,CAAD,IAAO;AACZH,IAAAA,OAAO,CAACC,GAAR,CAAYX,OAAO,GAAGI,GAAtB;AACAM,IAAAA,OAAO,CAACI,KAAR,CAAcD,CAAd;AACD,GAdI,CAAP;AAeD;AAED,OAAO,SAASE,WAAT,CAAqBZ,MAArB,EAA6BC,GAA7B,EAAkCC,MAAlC,EAA0CC,IAA1C,EAAgD;AACrD,SAAOR,KAAK,CAAC;AACXK,IAAAA,MADW;AAEXC,IAAAA,GAAG,EAAEH,OAAO,GAAGG,GAFJ;AAGXG,IAAAA,OAAO,EAAEF,MAHE;AAIXC,IAAAA,IAAI,EAAEA;AAJK,GAAD,CAAL,CAMJE,IANI,CAMEC,GAAD,IAAS;AACbC,IAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACA,WAAOA,GAAP;AACD,GAVI,EAWJG,KAXI,CAWGC,CAAD,IAAO;AACZH,IAAAA,OAAO,CAACI,KAAR,CAAcD,CAAd;AACD,GAbI,CAAP;AAcD;AAED,OAAO,SAASG,UAAT,CAAoBb,MAApB,EAA4BC,GAA5B,EAAiCE,IAAjC,EAAuC;AAC5C,QAAMW,OAAO,GAAGlB,UAAU,EAA1B;AACA,SAAOD,KAAK,CAAC;AACXK,IAAAA,MAAM,EAAE,KADG;AAEXC,IAAAA,GAAG,EAAEJ,OAAO,GAAG,OAFJ;AAGXO,IAAAA,OAAO,EAAE;AACP;AACE;AACAW,MAAAA,YAAY,CAACC,OAAb,CAAqB,eAArB;AAHK,KAHE;AAQXb,IAAAA,IAAI,EAAEA;AARK,GAAD,CAAL,CAUJE,IAVI,CAUEC,GAAD,IAAS;AACbS,IAAAA,YAAY,CAACE,OAAb,CAAqB,cAArB,EAAqCX,GAAG,CAACH,IAAJ,CAASe,YAA9C;AACD,GAZI,EAaJT,KAbI,CAaE,MAAM;AACXM,IAAAA,YAAY,CAACI,UAAb,CAAwB,cAAxB;AACAJ,IAAAA,YAAY,CAACI,UAAb,CAAwB,eAAxB;AACAL,IAAAA,OAAO,CAACM,IAAR,CAAa,GAAb;AACD,GAjBI,CAAP;AAkBD","sourcesContent":["import Axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport const MainURL = \"http://10.156.147.50:8081\";\r\nexport const FileURL = \"http://3.15.177.120:3000\";\r\n\r\nexport function request(method, url, header, data) {\r\n  return Axios({\r\n    method,\r\n    url: MainURL + url,\r\n    headers: header,\r\n    data: data,\r\n  })\r\n    .then((res) => {\r\n      console.log(\"다 받기 성공\");\r\n      console.log(res);\r\n      return res;\r\n    })\r\n    .catch((e) => {\r\n      console.log(MainURL + url);\r\n      console.error(e);\r\n    });\r\n}\r\n\r\nexport function fileRequest(method, url, header, data) {\r\n  return Axios({\r\n    method,\r\n    url: FileURL + url,\r\n    headers: header,\r\n    data: data,\r\n  })\r\n    .then((res) => {\r\n      console.log(\"다 받기 성공\");\r\n      console.log(res);\r\n      return res;\r\n    })\r\n    .catch((e) => {\r\n      console.error(e);\r\n    });\r\n}\r\n\r\nexport function useRefresh(method, url, data) {\r\n  const history = useHistory();\r\n  return Axios({\r\n    method: \"put\",\r\n    url: MainURL + \"/auth\",\r\n    headers: {\r\n      \"X-Refresh-Token\":\r\n        /* \"eyJhbGciOiJIUzI1NiJ9.eyJpYXQiOjE2MTAzNjE1OTYsInN1YiI6IjIwMTIwMWtlYkBkc20uaHMua3IiLCJleHAiOjE2MTAzNjE3MTYsInR5cGUiOiJyZWZyZXNoX3Rva2VuIn0.8sq03qagvs3fV6zHYaa3XclEmRCnQ2vQd6LpryMjEUM\", */\r\n        localStorage.getItem(\"refresh-token\"),\r\n    },\r\n    data: data,\r\n  })\r\n    .then((res) => {\r\n      localStorage.setItem(\"access-token\", res.data.access_token);\r\n    })\r\n    .catch(() => {\r\n      localStorage.removeItem(\"access-token\");\r\n      localStorage.removeItem(\"refresh-token\");\r\n      history.push(\"/\");\r\n    });\r\n}\r\n"]},"metadata":{},"sourceType":"module"}